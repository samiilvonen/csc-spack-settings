# This is a Spack Environment file.
#
# It describes a set of packages to be installed, along with
# configuration settings.
spack:
  # add package specs to the `specs` list
  specs:
  - boost
  - cdo
  - eccodes
  - fftw
  - gsl
  - jasper
  - jemalloc
  - hdf5
  - parallel-netcdf
  - netcdf-c
  - netcdf-fortran
  - openmpi
  - intel-oneapi-mkl
  view: false
  concretizer:
    unify: when_possible
  packages:
    all:
      compiler: [gcc@13.2.0]
      target: [cascadelake]
      providers:
        blas: [intel-oneapi-mkl]
        lapack: [intel-oneapi-mkl]
        scalapack: [intel-oneapi-mkl]
    intel-oneapi-mkl:
      variants: +cluster mpi_family=openmpi threads=openmp
    boost:
      variants: +context+container+coroutine+fibber+icu+mpi cxxstd=17
    cdo:
      variants: +curl
    eccodes:
      variants: +aec+fortran+memfs+netcdf+openmp+png~pthreads~python jp2k=jasper build_type=Release
    fftw:
      variants: +mpi
    gsl:
      variants: +external-cblas
    hdf:
      variants: ~external-xdr+shared+szip
    hdf5:
      variants: +threadsafe+szip+fortran+cxx+hl+mpi+tools
    netcdf-c:
      variants: +dap~fsync+hdf4~jna+mpi+parallel-netcdf+pic+shared
    openmpi:
      variants: fabrics=ucx schedulers=slurm +lustre +romio romio-filesystem=lustre
    python:
      variants: +tls
