modules:
  prefix_inspections:
    include:
    - CPATH
    lib:
    - LIBRARY_PATH
    lib64:
    - LIBRARY_PATH
    man:
    - MANPATH
    share/man:
    - MANPATH
    share/aclocal:
    - ACLOCAL_PATH
  default:
    enable:
    - lmod
    - tcl
    roots:
      lmod: /appl/spack/v023/modulefiles
    arch_folder: false
    lmod:
      hide_implicits: false
      hash_length: 0
      core_compilers:
      - gcc@8.5.0
      hierarchy:
      - mpi
      include: []
      exclude:
      - '%gcc@8.5.0'
      - '%gcc@13.2.0'
      all:
        autoload: direct
        conflict:
        - '{name}'
        environment:
          set:
            '{name}_INSTALL_ROOT': '{prefix}'
      cuda:
        environment:
          append_path:
            LIBRARY_PATH: '{prefix}/lib64/stubs'
      fftw:
        suffixes:
          +mpi: mpi
          +openmp: omp
      gcc:
        environment:
          set:
            CC: gcc
            CXX: g++
            FC: gfortran
            F90: gfortran
            F77: gfortran
            I_MPI_CC: gcc
            I_MPI_CXX: g++
            I_MPI_FC: gfortran
            I_MPI_F90: gfortran
            I_MPI_F77: gfortran
      gdal:
        environment:
          set:
            SSL_CERT_FILE: /etc/ssl/certs/ca-bundle.crt
      gromacs:
        suffixes:
          +cuda: cuda
          +plumed: plumed
      hdf5:
        suffixes:
          +mpi: mpi
      intel:
        environment:
          set:
            CC: icc
            CXX: icpc
            FC: ifort
            F90: ifort
            F77: ifort
            ICCCFG: /appl/opt/intel_configs/icc_gcc83_csc.cfg
            ICPCCFG: /appl/opt/intel_configs/icpc_gcc83_csc.cfg
            IFORTCFG: /appl/opt/intel_configs/ifort_gcc83_csc.cfg
            I_MPI_CC: icc
            I_MPI_CXX: icpc
            I_MPI_FC: ifort
            I_MPI_F90: ifort
            I_MPI_F77: ifort
      intel-mkl:
        suffixes:
          intel-mkl threads=openmp: omp
      intel-oneapi-mpi:
        environment:
          prepend_path:
            LD_LIBRARY_PATH: "/appl/opt/ucx/1.12.1/lib:/appl/opt/ucx/1.12.1/lib/ucx"
          set:
            FI_PROVIDER: "mlx"
            I_MPI_PMI_VALUE_LENGTH_MAX: "512"
            SLURM_MPI_TYPE: "pmi2"
      openblas:
        suffixes:
          threads=openmp: omp
      openmpi:
        environment:
          set:
            OMPI_MCA_io: ^ompio
            PMIX_MCA_psec: ^munge
            SLURM_MPI_TYPE: pmix_v4
          prepend_path:
            LD_LIBRARY_PATH: '{prefix}/lib'
    tcl:
      hash_length: 4
      projections:
        all: '{name}/{version}-{compiler.name}-{compiler.version}'
        ^mpi: '{name}/{version}-{^mpi.name}-{^mpi.version}-{compiler.name}-{compiler.version}'
      all:
        autoload: direct
      cuda:
        environment:
          append_path:
            LIBRARY_PATH: '{prefix}/lib64/stubs'
      gcc:
        environment:
          set:
            CC: gcc
            CXX: g++
            FC: gfortran
            F90: gfortran
            F77: gfortran
            I_MPI_CC: gcc
            I_MPI_CXX: g++
            I_MPI_FC: gfortran
            I_MPI_F90: gfortran
            I_MPI_F77: gfortran
      intel:
        environment:
          set:
            CC: icc
            CXX: icpc
            FC: ifort
            F90: ifort
            F77: ifort
            ICCCFG: /appl/opt/intel_configs/icc_gcc83_csc.cfg
            ICPCCFG: /appl/opt/intel_configs/icpc_gcc83_csc.cfg
            IFORTCFG: /appl/opt/intel_configs/ifort_gcc83_csc.cfg
            I_MPI_CC: icc
            I_MPI_CXX: icpc
            I_MPI_FC: ifort
            I_MPI_F90: ifort
            I_MPI_F77: ifort
      intel-oneapi-mpi:
        environment:
          prepend_path:
            LD_LIBRARY_PATH: "/appl/opt/ucx/1.12.1/lib:/appl/opt/ucx/1.12.1/lib/ucx"
          set:
            FI_PROVIDER: "mlx"
            I_MPI_PMI_VALUE_LENGTH_MAX: "512"
            SLURM_MPI_TYPE: "pmi2"
      openmpi:
        environment:
          set:
            OMPI_MCA_io: ^ompio
            PMIX_MCA_psec: ^munge
            SLURM_MPI_TYPE: pmix_v4
          prepend_path:
            LD_LIBRARY_PATH: '{prefix}/lib'
  unsupported_set:
    enable::
    - lmod
    roots:
      lmod: /appl/spack/v023/unsupported
    lmod:
      hash_length: 0
      core_compilers:
      - gcc@8.5.0
      hierarchy:
      - mpi
      include:
      - nvhpc
      exclude:
      - '%gcc@8.5.0'
      - '%gcc@9.4.0'
      - '%gcc@11.3.0'

